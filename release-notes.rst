.. _release-notes:

#########
Изменения
#########

.. 0.1.5:

0.1.5:
=======

* добавлена возможность указания модели даннных для ответа json-rpc клиента


.. 0.1.4:

0.1.4:
=======

* Исправлена работа с S3 (теперь get_object загружает весь оюъект)
*
* JSON-RPC поверх AMQP
* taskmanager больше не зависит от iprpc
* Значение по-улолчанию для CORS в JSON-RPC HTTP сервере теперь https://playground.open-rpc.org
* добавлены методы app.shutdown() app.restart() для остановки и перезапуска приложения соответственно

.. 0.1.3:

0.1.3:
=======

* Поддержка CORS в JSON-RPC HTTP сервере
* добавлен потерянный tinyrpc в requirements.txt

.. 0.1.2:

0.1.2:
=======

* json rpc 2.0: мелкие правки и улучшения

.. 0.1.1:

0.1.1:
=======

* json rpc 2.0: http сервер и клинет, openrpc discover
* jaeger в qase
* sftp client

.. 0.1.0:

0.1.0:
=======

* релиз на pypi

.. 0.0.32:

0.0.32:
=======

* автоматическое формирование документации по конфигурации приложения для sphinx
* исправлена ошибка в DB task manager

.. 0.0.31:

0.0.31:
=======

* исправлена ошибка в DB task manager
* обновлены зависимости


.. 0.0.30:

0.0.30:
=======

* исправлен app контекст в RpcClient (создавало ошибки при тестировании)
* исправлено название и форматирование аннотаций postgres спанов
* добавлена поддержка qase

.. 0.0.29:

0.0.29:
=======

* исправлены ошибки генерации openapi

.. 0.0.28:

0.0.28:
=======

* openapi, swagger and redoc

.. 0.0.27:

0.0.27:
=======

* поддержка s3
* отображение конфига в переменных окружения(не стабильно)
* обновлен iprpc до 0.1.3

.. 0.0.26:

0.0.26:
=======

* исправлен fetch для oracle
* обновлены sentry-sdk idna mock Sphinx tox watchdog

.. 0.0.25:

0.0.25:
=======

* healthcheck для oracle

.. 0.0.24:

0.0.24:
=======

* добавлена поддержка oracle database
* обновлен iprpc

.. 0.0.23:

0.0.23:
=======

* логирование трассировки ошибок при обратотке rpc вызовов

.. 0.0.22:

0.0.22:
=======

* улучшен autoreload

.. 0.0.21:

0.0.21:
=======

* обновлены зависимости

.. 0.0.20:

0.0.20:
=======

* автоматический перезапуск сервиса при изменениях в директории проекта
* исправлена функция json_encode, добавлена возможноть ее переопределения в компонетах
* правка http сервера со статикой

.. 0.0.19:

0.0.19:
=======

* ВАЖНО! ТРЕБУЕТСЯ МИГРАЦИЯ БД НА НОВУЮ СХЕМУ ТАБЛИЦЫ
* переработано логирование запросов в БД.
* логирование параметров sql запросов
* новый стил именования span-ов (имена запросов будут в имени span-а)

.. 0.0.18:

0.0.18:
=======

* передача версии приложения и времени сборки при старте через cli


.. 0.0.17:

0.0.17:
=======

* логировать или нет http запрос/ответ теперь настраивается в конфигурации компонента, а не свойствами span-а
* логирование amqp в RequestsAdapter


.. 0.0.16:

0.0.16:
=======

* вместо декоратора @wrap2span теперь используется контекстный менеджер с явной передачей в него ссылки на объект Application. Данное изменение для большей гибкости автотестов
* возможность обработать span перед его отправкой в адаптер(например для наложения маски на данные)
* осправления в трассировке db taskmanager


.. 0.0.15:

0.0.15:
=======

* Обновлен iprpc
* Документация
* Больше квантили для метрик prometheus по умолчанию
* для http-rpc сервера исправлен ответ в случае ошибки
* исправлен db taskmanager


.. 0.0.14:

0.0.14:
=======

* Переподключение к БД в случае потери соединения в RequestsAdapter и Taskanager
* Исправлено: для http сервера не логировались ошибки


.. 0.0.13:

0.0.13:
=======

* в pg добавлен executemany.


.. 0.0.12:

0.0.12:
=======

* исправлена ошибка если query_one вернул None
* трассировка для amqp rpc теперь выгрядит как и для http rpc. Т.е. один span для вызова клиента и один span для сервера.


.. 0.0.11:

0.0.11:
=======

* вывод ошибки amqp rpc в stderr
* больше сервис не будет зависать, если канал AMQP закрылся
* логирование amqp сообщений(включается в конфиге)


.. 0.0.10:

0.0.10:
=======

* логирование SQL запроса и результата его выполнения(управляется через конфигурацию)

.. 0.0.9:

0.0.9:
=======

* Application переименован в BaseApplication
* конструктор(def __init__) BaseApplication теперь обязательно должен принимать объект конфигурации первым аргументом
* добавлен cli скрип для запуска сервиса с разбором аргументов командной строки
* все сервера по-умолчанию слушают 0.0.0.0 вместо 127.0.0.1
* добавлен компонент для отложенного гарантированного выполнения задач c повторами
* исправления ошибок


.. 0.0.8:

0.0.8:
======

* MVP